<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module represents abstraction on top the linux direct rendering manager api (drm)."><meta name="keywords" content="rust, rustlang, rust-lang, drm"><title>smithay::backend::drm - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-a6e10e60fb712b0f.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-5f7299aa2b503fb1.css"><link rel="stylesheet" disabled href="../../../static.files/dark-dfb18ef8114bb428.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-4047a6aaddd3789d.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../smithay/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../smithay/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module drm</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">smithay</a>::<wbr><a href="../index.html">backend</a>::<wbr><a class="mod" href="#">drm</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/smithay/backend/drm/mod.rs.html#1-171">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module represents abstraction on top the linux direct rendering manager api (drm).</p>
<h3 id="drmdevice"><a href="#drmdevice"><code>DrmDevice</code></a></h3>
<p>A device exposes certain properties, which are directly derived
from the <em>device</em> as perceived by the direct rendering manager api (drm). These resources consists
out of connectors, encoders, framebuffers, planes and crtcs.</p>
<p><a href="drm::control::crtc"><code>crtc</code></a>s represent scanout engines of the device pointer to one framebuffer.
Their responsibility is to read the data of the framebuffer and export it into an “Encoder”.
The number of crtc’s represent the number of independent output devices the hardware may handle.</p>
<p>On modern graphic cards it is better to think about the <code>crtc</code> as some sort of rendering engine.
You can only have so many different pictures, you may display, as you have <code>crtc</code>s, but a single image
may be put onto multiple displays.</p>
<p>An <a href="drm::control::encoder"><code>encoder</code></a> encodes the data of connected crtcs into a video signal for a fixed set of connectors.
E.g. you might have an analog encoder based on a DAG for VGA ports, but another one for digital ones.
Also not every encoder might be connected to every crtc.</p>
<p>A <a href="drm::control::connector"><code>connector</code></a> represents a port on your computer, possibly with a connected monitor, TV, capture card, etc.</p>
<p>A <a href="drm::control::framebuffer"><code>framebuffer</code></a> represents a buffer you may display, see <code>DrmSurface</code> below.</p>
<p>A <a href="drm::control::plane"><code>plane</code></a> adds another layer on top of the crtcs, which allow us to layer multiple images on top of each other more efficiently
then by combining the rendered images in the rendering phase, e.g. via OpenGL. Planes have to be explicitly used by the user to be useful.
Every device has at least one primary plane used to display an image to the whole crtc. Additionally cursor and overlay planes may be present.
Cursor planes are usually very restricted in size and meant to be used for hardware cursors, while overlay planes may
be used for performance reasons to display any overlay on top of the image, e.g. the top-most windows.
Overlay planes may have a bunch of weird limitation, that you cannot query, e.g. only working on round pixel coordinates.
You code should never rely on a fixed set of overlay planes, but always have a fallback solution in place.</p>
<p>The main functionality of a <code>Device</code> in smithay is to give access to all these properties for the user to
choose an appropriate rendering configuration. What that means is defined by the requirements and constraints documented
in the specific device implementations. The second functionality is the creation of a <code>Surface</code>.
Surface creation requires a <code>crtc</code> (which cannot be the same as another existing <code>Surface</code>’s crtc), a plane,
as well as a <code>Mode</code> and a set of <code>connectors</code>.</p>
<p>smithay does not make sure that <code>connectors</code> are not already in use by another <code>Surface</code>. Overlapping <code>connector</code>-Sets may
be an error or result in undefined rendering behavior depending on the <code>Surface</code> implementation.</p>
<h3 id="drmsurface"><a href="#drmsurface"><code>DrmSurface</code></a></h3>
<p>A surface is a part of a <code>Device</code> that may output a picture to a number of connectors. It pumps pictures of buffers to outputs.</p>
<p>On surface creation a matching encoder for your <code>connector</code> is automatically selected, if one exists(!),
which means you still need to check your configuration beforehand, even if you do not need to provide an encoder.</p>
<p>A surface consists of one <code>crtc</code> that is rendered to by the user. This is fixed for the <code>Surface</code>s lifetime and cannot be changed.
A surface also always needs at least one connector to output the resulting image to as well as a <code>Mode</code> that is valid for the given connectors.</p>
<p>The state of a <code>Surface</code> is double-buffered, meaning all operations that chance the set of <code>connector</code>s or their <code>Mode</code> are stored and
only applied on the next commit. <code>Surface</code>s do their best to validate these changes, if possible.</p>
<p>A commit/page_flip may be triggered to apply the pending state.</p>
<h3 id="rendering"><a href="#rendering">Rendering</a></h3>
<p>The drm infrastructure makes no assumptions about the used renderer and does not interface with them directly.
It just provides a way to create framebuffers from various buffer types (mainly <code>DumbBuffer</code>s and hardware-backed gbm <code>BufferObject</code>s).</p>
<p>Buffer management and details about the various types can be found in the <a href="../allocator/index.html"><code>allocator</code>-Module</a> and
rendering abstractions, which can target these buffers can be found in the <a href="../renderer/index.html"><code>renderer</code>-Module</a>.</p>
<h3 id="drmnode"><a href="#drmnode"><code>DrmNode</code></a></h3>
<p>A drm node refers to a drm device and the capabilities that may be performed using the node.
Generally <a href="node/struct.DrmNode.html" title="DrmNode"><code>DrmNode</code></a> is primarily used by clients (such as the output backends) which need
to allocate buffers for use in X11 or Wayland. If you need to do mode setting, you should use
<a href="struct.DrmDevice.html" title="DrmDevice"><code>DrmDevice</code></a> instead.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.CreateDrmNodeError"><code>pub use node::<a class="enum" href="node/enum.CreateDrmNodeError.html" title="enum smithay::backend::drm::node::CreateDrmNodeError">CreateDrmNodeError</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.DrmNode"><code>pub use node::<a class="struct" href="node/struct.DrmNode.html" title="struct smithay::backend::drm::node::DrmNode">DrmNode</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.NodeType"><code>pub use node::<a class="enum" href="node/enum.NodeType.html" title="enum smithay::backend::drm::node::NodeType">NodeType</a>;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="node/index.html" title="smithay::backend::drm::node mod">node</a></div><div class="item-right docblock-short">Module for abstractions on drm device nodes</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DrmDevice.html" title="smithay::backend::drm::DrmDevice struct">DrmDevice</a></div><div class="item-right docblock-short">An open drm device</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DrmDeviceFd.html" title="smithay::backend::drm::DrmDeviceFd struct">DrmDeviceFd</a></div><div class="item-right docblock-short">Ref-counted file descriptor of an open drm device</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DrmEventMetadata.html" title="smithay::backend::drm::DrmEventMetadata struct">DrmEventMetadata</a></div><div class="item-right docblock-short">Timing metadata for page-flip events</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DrmSurface.html" title="smithay::backend::drm::DrmSurface struct">DrmSurface</a></div><div class="item-right docblock-short">An open crtc + plane combination that can be used for scan-out</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GbmBufferedSurface.html" title="smithay::backend::drm::GbmBufferedSurface struct">GbmBufferedSurface</a></div><div class="item-right docblock-short">Simplified abstraction of a swapchain for gbm-buffers displayed on a <a href="struct.DrmSurface.html" title="DrmSurface"><code>DrmSurface</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Planes.html" title="smithay::backend::drm::Planes struct">Planes</a></div><div class="item-right docblock-short">A set of planes as supported by a crtc</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DrmError.html" title="smithay::backend::drm::DrmError enum">DrmError</a></div><div class="item-right docblock-short">Errors thrown by the <a href="struct.DrmDevice.html"><code>DrmDevice</code></a>
and the <a href="struct.DrmSurface.html"><code>DrmSurface</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DrmEvent.html" title="smithay::backend::drm::DrmEvent enum">DrmEvent</a></div><div class="item-right docblock-short">Events that can be generated by a DrmDevice</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DrmEventTime.html" title="smithay::backend::drm::DrmEventTime enum">DrmEventTime</a></div><div class="item-right docblock-short">Either a realtime or monotonic timestamp</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.GbmBufferedSurfaceError.html" title="smithay::backend::drm::GbmBufferedSurfaceError enum">GbmBufferedSurfaceError</a></div><div class="item-right docblock-short">Errors thrown by a <a href="struct.GbmBufferedSurface.html" title="GbmBufferedSurface"><code>GbmBufferedSurface</code></a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0-nightly (5e37043d6 2023-01-22)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>